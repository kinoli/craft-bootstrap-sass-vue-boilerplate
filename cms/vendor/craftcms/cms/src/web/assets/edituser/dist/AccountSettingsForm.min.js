!function(e){Craft.AccountSettingsForm=Garnish.Base.extend({userId:null,isCurrent:null,$copyPasswordResetUrlBtn:null,$copyImpersonationUrlBtn:null,$actionSpinner:null,confirmDeleteModal:null,$deleteBtn:null,init:function(t,s,n){this.userId=t,this.isCurrent=s,this.setSettings(n,Craft.AccountSettingsForm.defaults),this.$copyPasswordResetUrlBtn=e("#copy-passwordreset-url"),this.$copyImpersonationUrlBtn=e("#copy-impersonation-url"),this.$actionSpinner=e("#action-spinner"),this.$deleteBtn=e("#delete-btn"),this.addListener(this.$copyPasswordResetUrlBtn,"click","handleCopyPasswordResetUrlBtnClick"),this.addListener(this.$copyImpersonationUrlBtn,"click","handleCopyImpersonationUrlBtnClick"),this.addListener(this.$deleteBtn,"click","showConfirmDeleteModal")},handleCopyPasswordResetUrlBtnClick:function(){Craft.elevatedSessionManager.requireElevatedSession(e.proxy(this,"getPasswordResetUrl"))},getPasswordResetUrl:function(){this.$actionSpinner.removeClass("hidden");var t={userId:this.userId};Craft.postActionRequest("users/get-password-reset-url",t,e.proxy((function(e,t){this.$actionSpinner.addClass("hidden"),"success"===t&&Craft.ui.createCopyTextPrompt({label:Craft.t("app","Copy the activation URL"),value:e.url})}),this))},handleCopyImpersonationUrlBtnClick:function(){this.$actionSpinner.removeClass("hidden");var e={userId:this.userId};Craft.postActionRequest("users/get-impersonation-url",e,(e,t)=>{this.$actionSpinner.addClass("hidden"),"success"===t&&Craft.ui.createCopyTextPrompt({label:Craft.t("app","Copy the impersonation URL, and open it in a new private window."),value:e.url})})},showConfirmDeleteModal:function(){this.confirmDeleteModal?this.confirmDeleteModal.show():(this.$actionSpinner.removeClass("hidden"),Craft.postActionRequest("users/user-content-summary",{userId:this.userId},e.proxy((function(e,t){this.$actionSpinner.addClass("hidden"),"success"===t&&(this.confirmDeleteModal=new Craft.DeleteUserModal(this.userId,{contentSummary:e,redirect:this.settings.deleteModalRedirect}))}),this)))}},{defaults:{deleteModalRedirect:null}})}(jQuery);
//# sourceMappingURL=AccountSettingsForm.min.js.map
