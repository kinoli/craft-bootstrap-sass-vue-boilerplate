{"version":3,"sources":["edituser/src/profile.js"],"names":["$","uploadSettings","userId","attr","postParameters","deleteAction","containerSelector","uploadAction","uploadButtonSelector","fileInputSelector","response","html","changeSidebarPicture","find","replaceWith","clone","Craft","ImageUpload","editorSettings","allowSavingAsNew","onSave","location","reload","AssetImageEditor","currentTarget","ev","data","jQuery"],"mappings":"CAAA,SAACA,GAEG,IAAAC,EAAA,CACIA,eAAiB,CAAAC,OAAAF,EAAA,eAAAG,KAAA,cACjBC,kBAAgB,cAACF,aAAU,0BADVG,aAAA,0BAEjBC,qBAAmB,oBACnBC,qBAAc,oBACdF,kBAAc,oBACdG,gBAAoB,QAEpBC,oBAAmB,SAAAC,QAPF,IAQAA,EARAC,MAUuB,oBAAnBC,sBAAmBA,sBACzBF,EAAAA,iBAAkBG,KAAA,SAAaC,YAAAd,EAAA,kBAAAa,KAAA,SAAAE,WAXlD,IAAAC,MAAAC,YAAAhB,GAqBA,IAAIiB,EAAiB,CACjBC,kBAAkB,EAClBC,OAAQ,WAEJC,SAAAC,WAKJtB,EAAA,SAAUuB,GAAAA,QAAAA,mBAAsBC,SAALC,GAD/B,IAAAT,MAAAO,iBAAAvB,EAAAyB,EAAAD,eAAAE,KAAA,WAAAR,MAhCJ,CAmCGS","file":"profile.min.js","sourcesContent":["(function($) {\n    /** global: Craft */\n    /** global: Garnish */\n    let uploadSettings = {\n        postParameters: {userId: $('.user-photo').attr('data-user')},\n        containerSelector: '.user-photo',\n        uploadAction: 'users/upload-user-photo',\n        deleteAction: 'users/delete-user-photo',\n        uploadButtonSelector: '.btn.upload-photo',\n        deleteButtonSelector: '.btn.delete-photo',\n        fileInputSelector: 'input[name=photo]',\n        uploadParamName: 'photo',\n\n        onAfterRefreshImage: function(response) {\n            if (typeof response.html !== 'undefined') {\n                if (typeof changeSidebarPicture !== 'undefined' && changeSidebarPicture) {\n                    $('.header-photo').find('> img').replaceWith($('#current-photo').find('> img').clone());\n                }\n            }\n        }\n    };\n\n    new Craft.ImageUpload(uploadSettings);\n\n    let editorSettings = {\n        allowSavingAsNew: false,\n        onSave: function() {\n            // So not optimal.\n            location.reload();\n        },\n    };\n\n    $('#main').on('click', '.btn.edit-photo', function(ev) {\n        new Craft.AssetImageEditor($(ev.currentTarget).data('photoid'), editorSettings);\n    });\n})(jQuery);\n"]}