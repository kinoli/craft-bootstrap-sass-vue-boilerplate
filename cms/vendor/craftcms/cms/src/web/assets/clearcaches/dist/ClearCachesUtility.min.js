!function(t){Craft.ClearCachesUtility=Garnish.Base.extend({init:function(e){let a=t("form.utility");for(let t=0;t<a.length;t++){let e=a.eq(t),s=e.find("input[type=checkbox]"),r=e.find(".btn"),o=function(){s.filter(":checked").length?r.removeClass("disabled"):r.addClass("disabled")};s.on("change",o),o(),this.addListener(e,"submit",t=>{t.preventDefault(),r.hasClass("disabled")||this.onSubmit(t)})}},onSubmit:function(e){let a,s,r=t(e.currentTarget),o=r.find("button.submit"),i=r.find(".utility-status");o.hasClass("disabled")||(r.data("progressBar")?(a=r.data("progressBar"),a.resetProgressBar(),s=r.data("allDone")):(a=new Craft.ProgressBar(i),r.data("progressBar",a)),a.$progressBar.removeClass("hidden"),a.$progressBar.velocity("stop").velocity({opacity:1},{complete:t.proxy((function(){let e=Garnish.getPostData(r),n=Craft.expandPostArray(e);Craft.postActionRequest(n.action,n,(e,n)=>{e&&e.error&&alert(e.error),a.setProgressPercentage(100),setTimeout(()=>{s||(s=t('<div class="alldone" data-icon="done" />').appendTo(i),s.css("opacity",0),r.data("allDone",s)),a.$progressBar.velocity({opacity:0},{duration:"fast",complete:()=>{s.velocity({opacity:1},{duration:"fast"}),o.removeClass("disabled"),o.trigger("focus")}})},300)},{complete:t.noop})}),this)}),s&&s.css("opacity",0),o.addClass("disabled"),o.trigger("blur"))}})}(jQuery);
//# sourceMappingURL=ClearCachesUtility.min.js.map
